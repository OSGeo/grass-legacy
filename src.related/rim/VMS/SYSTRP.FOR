      SUBROUTINE SYSTRP
      INCLUDE 'TEXT.DCK'
      INCLUDE 'SYSPAR.DCK'
  
C     ** VAX SYSTEM DEPENDENT ROUTINE **
  
C     CATCH SYSTEM INTERRUPTS (CTRL-C)
  
      INCLUDE '($IODEF)'
      INCLUDE '($SYSSRVNAM)'
 
      COMMON /SYSTRP/ TT_CHAN, TT_STAT
      EXTERNAL VAX_TRP
 
      LOGICAL FIRST_CALL
      DATA FIRST_CALL /.TRUE./
 
C
 
C     THE MESSAGES SHOULD NEVER PRINT
 
      IF (FIRST_CALL) THEN
         TT_STAT = SYS$ASSIGN('TT',TT_CHAN,,)
         IF (.NOT.TT_STAT) PRINT *, 'NO CTRL-C HANDLING ',TT_STAT
         FIRST_CALL = .FALSE.
      ENDIF
 
      IF (TT_STAT) THEN
         CC_STAT = SYS$QIOW(,%VAL(TT_CHAN),
     1      %VAL(IO$_SETMODE.OR.IO$M_CTRLCAST),
     2      ,,,VAX_TRP,,%VAL(3),,,)
         IF (.NOT.CC_STAT) PRINT *, 'CTRL-C ERROR'
      ENDIF
      RETURN
      END
 
      SUBROUTINE VAX_TRP
      INCLUDE 'TEXT.DCK'
      INCLUDE 'SYSPAR.DCK'
  
C     ** VAX SYSTEM DEPENDENT ROUTINE **
  
C     CATCH SYSTEM INTERRUPTS (CTRL-C) (PART 2)
  
      INCLUDE 'FLAGS.DCK' 
C
      HXFLAG = 1
      CALL SYSTRP
      RETURN
      END
 
 
 
 
