#!/bin/sh
############################################################################
#
# MODULE:	g3.list for GRASS 5.7
# AUTHOR(S):	Markus Neteler (neteler itc it)
# PURPOSE:	List available G3D raster volumes, display files, & regions
# COPYRIGHT:	(C) 2004 by the GRASS Development Team
#
#		This program is free software under the GNU General Public
#		License (>=v2). Read the file COPYING that comes with GRASS
#		for details.
#
#############################################################################


#%Module
#%  description: g3.list - List available G3D raster volumes, display files, & regions
#%End
#%option
#% key: type
#% type: string
#% description: Type of files to list
#% options: g3d,dsp,region
#% answer: g3d
#% required : yes
#%end

if  [ -z $GISBASE ] ; then
 echo "You must be in GRASS GIS to run this program."
 exit 1
fi   

if [ "$1" != "@ARGS_PARSED@" ] ; then
  exec g.parser "$0" "$@"
fi

eval `g.gisenv`
: ${GISBASE?} ${GISDBASE?} ${LOCATION_NAME?} ${MAPSET?}
LOCATION=$GISDBASE/$LOCATION_NAME/$MAPSET


if [ "$GIS_OPT_type" = "g3d" ] ; then
 echo "----------------------------------------------"
 echo "G3D raster volumes available in mapset $MAPSET:"
 ls $LOCATION/grid3
 echo "----------------------------------------------"
 exit
fi

if [ "$GIS_OPT_type" = "dsp" ] ; then
 list=`find $LOCATION/grid3/$2 -type d -name '*' |grep dsp`
 echo "----------------------------------------------"
 echo "G3D display files available in mapset $MAPSET:"
 for i in $list ; do
#  echo "$list:"
  ls $i
 done
  echo "----------------------------------------------"
fi

if [ "$GIS_OPT_type" = "region" ] ; then
 echo "----------------------------------------------"
 echo "G3D region files available in mapset $MAPSET:"
 ls $LOCATION/windows3d
 echo "----------------------------------------------"
 exit
fi
