EXTRA_CFLAGS = $(USE_DIRECT) $(USE_BUFFERED_IO)

LIB =  $(LIBDIR)/libdbmi.a
OBJ = \
	c_add_col.o	\
	c_bindupdate.o	\
	c_close_cur.o	\
	c_closedb.o	\
	c_create_idx.o	\
	c_create_tab.o	\
	c_createdb.o	\
	c_delete.o	\
	c_deletedb.o	\
	c_drop_col.o	\
	c_desc_table.o	\
	c_drop_index.o	\
	c_drop_tab.o	\
	c_execute.o	\
	c_fetch.o	\
	c_finddb.o	\
	c_insert.o	\
	c_list_idx.o	\
	c_list_tabs.o	\
	c_listdb.o	\
	c_opendb.o	\
	c_openinsert.o	\
	c_openselect.o	\
	c_openupdate.o	\
	c_update.o	\
	c_version.o	\
    \
	d_add_col.o	\
	d_bindupdate.o	\
	d_close_cur.o	\
	d_closedb.o	\
	d_create_idx.o	\
	d_create_tab.o	\
	d_createdb.o	\
	d_delete.o	\
	d_deletedb.o	\
	d_desc_table.o	\
	d_drop_col.o	\
	d_drop_index.o	\
	d_drop_tab.o	\
	d_execute.o	\
	d_fetch.o	\
	d_finddb.o	\
	d_insert.o	\
	d_list_idx.o	\
	d_list_tabs.o	\
	d_listdb.o	\
	d_opendb.o	\
	d_openinsert.o	\
	d_openselect.o	\
	d_openupdate.o	\
	d_update.o	\
	d_version.o	\
    \
	alloc.o		\
	case.o		\
	column.o	\
	columnfmt.o	\
	connect.o	\
	cursor.o	\
	datetime.o	\
	dbmscap.o	\
	dirent.o	\
	driver.o	\
	driver_state.o	\
	error.o		\
	handle.o	\
	index.o		\
	interval.o	\
	isdir.o		\
	printtab.o	\
	ret_codes.o	\
	rclsrule.o	\
	reclass.o	\
	shutdown.o	\
	sqlCtype.o	\
	sqltype.o	\
	start.o		\
	string.o	\
	strip.o		\
	table.o		\
	token.o		\
	value.o		\
	valuefmt.o	\
	whoami.o	\
	zero.o		\
    \
	xdrchar.o	\
	xdrcolumn.o	\
	xdrdatetime.o	\
	xdrdouble.o	\
	xdrfloat.o	\
	xdrhandle.o	\
	xdrindex.o	\
	xdrint.o	\
	xdrprocedure.o	\
	xdrshort.o	\
	xdrstring.o	\
	xdrtable.o	\
	xdrtoken.o	\
	xdrvalue.o	\
    \
	xdr.o

$(LIB): $(OBJ)
	$(AR)

$(OBJ): $(INCLUDE_DIR)/dbmi.h $(INCLUDE_DIR)/proto_dbmi.h xdr.h macros.h

driver.o:	procs.h

proto:
	./BUILD.PROTO *.c > /tmp/proto_dbmi.hh
	mv /tmp/proto_dbmi.hh $(INCLUDE_DIR)/proto_dbmi.h
