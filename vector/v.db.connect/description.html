<h2>DESCRIPTION</h2>

<em>v.db.connect</em> prints or sets database connection for a vector map.

<h2>NOTE</h2>

If parameters for database connection are already set with 
<a HREF="db.connect.html">db.connect</a>, they are taken as default values and
do not need to be spcified each time.

<p>

<b>Attention:</b> Removing a vector map will also delete all tables linked to it! If
you use v.db.connect to link further tables to your map, it is advisable to 
make a copy from those tables first and connect the copied tables to 
the vector map (see also <a HREF="v.overlay.html">v.overlay</a>).

<h2>EXAMPLE</h2>

<em>Print database connection</em>
<br>
<div class="code"><pre>
v.db.connect -p map=vectormap
</pre></div>

<p>

<em>Print column types and names of table linked to vector map</em>
<br>
<div class="code"><pre>
v.db.connect -c map=vectormap
</pre></div>

<h3>Connect vector map to database (DBF driver)</h3>

<em>Connect vector map to DBF table without or with variables</em><br>

Using default DB connection:<br>
<div class="code"><pre>
v.db.connect map=vectormap table=table
</pre></div>

<p>

Using hardcoded path to DBF directory (not recommended):<br>
<div class="code"><pre>
v.db.connect map=vectormap table=table database=/home/user/grassdata/spearfish60/PERMANENT/dbf
</pre></div>

<p>

Using variable as DBF directory definition, single quotes must be used:<br>
<div class="code"><pre>
v.db.connect map=vectormap table=table database='$GISDBASE/$LOCATION_NAME/$MAPSET/dbf/'
</pre></div>

<p>
<em>Connect vector map layer 2 and key ID to database with variables</em><br>
(note: if needed, single quotes must be used for the <em>database</em> parameter)<br>
<div class="code"><pre>
v.db.connect map=vectormap table=table layer=2 key=ID
</pre></div>


<h3>Connect vector map to database (MySQL driver)</h3>

<div class="code"><pre>
# note: connection which requires password
db.connect driver=mysql database="host=dbserver.foo.org,dbname=my_database"
db.login user=joshua [password=xxx]
# ... or enter password interactively.

db.tables -p

# connect external table to layer 2:
v.db.connect map=my_map table=my_mysql_table key=baz layer=2
v.db.connect -p my_map
</pre></div>


<h3>Connect vector map to database (PostgreSQL driver)</h3>

<div class="code"><pre>
# note: connection without password being asked
v.db.connect map=vectormap table=table layer=1 key=oid driver=pg \
             database="host=myserver.itc.it,dbname=mydb,user=name" \
             table=mytable key=id
</pre></div>

<H3>Store geometry in GRASS but attributes in PostgreSQL</H3>

This example illustrated a mixed data storage with possibility
top update attributes in external PostgreSQL database:

<div class="code"><pre>
# Check current settings for attribute storage:
db.connect -p

# Import table from PostgreSQL to new map
# (NOTE: output map name needs to be different from table name in 
#        case that GRASS is connected to PostgreSQL):
v.in.db driver=pg database="host=localhost,dbname=meteo" \
        table=mytable x=lon y=lat key=cat out=mytable

v.db.connect map=mytable -p

# Cancel table connection between map and attribute table:
v.db.connect map=mytable -d
v.db.connect map=mytable -p

# Drop table which was replicated due to import:
db.tables -p
echo "DROP TABLE mytable" | db.execute
db.tables -p

# reconnect map to table in PostgreSQL:
v.db.connect map=mytable driver=pg database="host=localhost,dbname=meteo" \
        table=mytable key=cat

# Now the geometry is stored in GRASS while the attributes are stored
# in PostgreSQL.
</pre></div>

An alternative is to create a "view" of only ID, x, y [,z] columns and
to use <em>v.in.db</em> on this view, then connect the original
table to the geometry. This will be faster if the original table
is very large.


<H3>Store geometry in GRASS but attributes in PostGIS</H3>

This example illustrated a mixed data storage with possibility
top update attributes in external PostGIS database:

<div class="code"><pre>
# Check current settings for attribute storage:
db.connect -p

# Import table from PostGIS to new map
# (NOTE: output map name needs to be different from table name in 
#        case that GRASS is connected to PostGIS):
v.in.db driver=pg database="host=localhost,dbname=meteo" \
        table=mytable x="x(geom)" y="y(geom)" key=cat out=mytable

v.db.connect map=mytable -p

# Cancel table connection between map and attribute table:
v.db.connect map=mytable -d
v.db.connect map=mytable -p

# Drop table which was replicated due to import:
db.tables -p
echo "DROP TABLE mytable" | db.execute
db.tables -p

# reconnect map to table in PostGIS:
v.db.connect map=mytable driver=pg database="host=localhost,dbname=meteo" \
        table=mytable key=cat

# Now the geometry is stored in GRASS while the attributes are stored
# in PostGIS.
</pre></div>


<h2>SEE ALSO</h2>

<em>
<a HREF="db.connect.html">db.connect</a>,
<a HREF="db.copy.html">db.copy</a>,
<a HREF="db.tables.html">db.tables</a>,
<a HREF="v.db.addtable.html">v.db.addtable</a>,
<a HREF="v.external.html">v.external</a>,
<a HREF="v.in.db.html">v.in.db</a>,
<a HREF="v.overlay.html">v.overlay</a>,
</em>

<h2>AUTHOR</h2>

Radim Blazek, ITC-Irst, Trento, Italy

<p><i>Last changed: $Date$</i>
